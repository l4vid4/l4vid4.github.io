---
title: 算法
createTime: 2025/04/24 18:35:26
permalink: /studyNotes/yrm1by7l/
---
## 限流算法

| 限流算法                                | 工作原理                                            | 适用场景               | 优缺点                                                       |
| --------------------------------------- | --------------------------------------------------- | ---------------------- | ------------------------------------------------------------ |
| 计数器（Counter）                       | 设定固定时间窗口，计数请求数，超过阈值则拒绝        | 简单的固定时间窗口限流 | ✅ 实现简单，开销小  ❌ 突发流量可能导致短时间超载             |
| 滑动窗口（Sliding Window）              | 以滑动窗口方式统计请求数，更平滑地进行限流          | 适用于流量平稳的系统   | ✅ 改进计数器算法，避免短时突发 ❌ 仍然可能在窗口边界发生突发流量 |
| 漏桶（Leaky Bucket）                    | 请求以固定速率流出，超出速率的请求丢弃或排队        | 网络请求、流量整形     | ✅ 平滑限流，防止突发 ❌ 可能导致请求被丢弃                    |
| 令牌桶（Token Bucket）                  | 令牌按固定速率生成，请求消耗令牌才能通过            | API 限流、分布式服务   | ✅ 允许一定程度的突发流量 ❌ 令牌生成速率需调优                |
| 一致性哈希（Consistent Hashing）        | 通过哈希分片限制流量，确保流量分布均衡              | 分布式限流             | ✅ 适用于分布式限流 ❌ 需要合理的哈希算法设计                  |
| Redis+滑动窗口                          | 使用 Redis 实现滑动窗口限流，通过 `ZSET` 记录时间戳 | 高并发请求限流         | ✅ 分布式可用，性能好 ❌ 依赖 Redis，需维护额外存储            |
| Nginx 限流（ngx_http_limit_req_module） | Nginx 提供的限流模块，基于漏桶算法                  | Web 服务器请求限流     | ✅ 易于部署，性能优越 ❌ 需结合应用层策略优化                  |
| Guava RateLimiter                       | Google Guava 库提供的基于令牌桶的限流工具           | Java 应用内部限流      | ✅ 易集成，适用于单机限流 ❌ 适用于单机，分布式需额外处理      |